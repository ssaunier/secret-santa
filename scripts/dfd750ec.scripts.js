(function(){"use strict";angular.module("secretSantaApp",["ngRoute"]).config(["$routeProvider","$locationProvider",function(a){return a.when("/",{templateUrl:"views/main.html",controller:"MainCtrl"}).otherwise({redirectTo:"/"})}])}).call(this),function(){"use strict";angular.module("secretSantaApp").controller("MainCtrl",["$scope",function(a){return a.awesomeThings=["HTML5 Boilerplate","AngularJS","Karma"]}])}.call(this),function(){"use strict";var a=[].indexOf||function(a){for(var b=0,c=this.length;c>b;b++)if(b in this&&this[b]===a)return b;return-1};angular.module("secretSantaApp").controller("RecipientCtrl",["$scope","$rootScope","RecipientStorage",function(b,c,d){return b.recipients=d.get(),b.newRecipient="",b.$watch("recipients",function(a,e){return a!==e?(d.put(b.recipients.sort(function(a,b){var c;return null!=(c=a.name>b.name)?c:{1:-1}})),c.$emit("recipients:changed")):void 0},!0),b.addRecipient=function(){var a;return a=b.newRecipient.trim(),a.length&&!b.isDuplicate(a)?(b.recipients.push({name:a,constraints:[]}),b.newRecipient=""):void 0},b.removeRecipient=function(a){return b.recipients.splice(b.recipients.indexOf(a),1)},b.isDuplicate=function(c){return a.call(d.names(b.recipients),c)>=0}}])}.call(this),function(){"use strict";angular.module("secretSantaApp").factory("RecipientStorage",function(){var a;return a="secret-santa-recipients",{get:function(){return JSON.parse(localStorage.getItem(a)||"[]")},put:function(b){return localStorage.setItem(a,JSON.stringify(b))},names:function(a){var b,c,d,e;for(e=[],c=0,d=a.length;d>c;c++)b=a[c],e.push(b.name);return e},index:function(a,b){return this.names(b).indexOf(a)},possibleTos:function(a,b){var c,d,e,f,g;for(d=this.names(b),d.splice(d.indexOf(a.name),1)[0],g=a.constraints,e=0,f=g.length;f>e;e++)c=g[e],d.splice(d.indexOf(c),1);return d}}})}.call(this),function(){"use strict";var a=[].indexOf||function(a){for(var b=0,c=this.length;c>b;b++)if(b in this&&this[b]===a)return b;return-1};angular.module("secretSantaApp").controller("ConstraintCtrl",["$scope","$rootScope","RecipientStorage",function(b,c,d){var e;return b.recipients=d.get(),b.newConstraintFrom="",b.newConstraintTo="",c.$on("recipients:changed",function(){return b.recipients=d.get()}),b.$watch("recipients",function(){return d.put(b.recipients)},!0),e=function(c,e){var f;return f=d.index(c,b.recipients),-1===f||a.call(b.recipients[f].constraints,e)>=0?void 0:b.recipients[f].constraints.push(e)},b.addConstraintWithOpposite=function(){return b.newConstraintFrom&&b.newConstraintTo&&b.newConstraintFrom!==b.newConstraintTo?(e(b.newConstraintFrom,b.newConstraintTo),b.opposite?e(b.newConstraintTo,b.newConstraintFrom):void 0):void 0},b.removeConstraints=function(a){return b.recipients[b.recipients.indexOf(a)].constraints=[]}}])}.call(this),function(){"use strict";angular.module("secretSantaApp").controller("TombolaCtrl",["$scope","RecipientStorage",function(a,b){var c,d,e,f;return d=b.get(),a.drawnRecipients=[],e=function(a){return Math.floor(Math.random()*a)},f=function(a){var b,c,d,e,f;for(b=d=e=a.length-1;1>=e?1>=d:d>=1;b=1>=e?++d:--d)c=Math.floor(Math.random()*(b+1)),f=[a[c],a[b]],a[b]=f[0],a[c]=f[1];return a},c=function(a){var d,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u;for(k=f(a.slice(0)),h=k.length,n=!1,p=0,s=a.length;s>p;p++)m=a[p],m.possibleTos=b.possibleTos(m,k);for(d=[],q=0,t=k.length;t>q;q++){for(m=k[q],i=m,l=b.possibleTos(i,k),r=0,u=d.length;u>r;r++)g=d[r],j=l.indexOf(g),-1!==j&&l.splice(j,1);if(0===l.length){n=!0;break}o=l[e(l.length)],i.to=o,d.push(o)}return n?c(a):k},a.runSecretSanta=function(){return a.drawnRecipients=c(d)}}])}.call(this);